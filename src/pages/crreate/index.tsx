import axios from "axios";
import { FC } from "react";
import { Link, LoaderFunction, LoaderFunctionArgs, redirect } from "react-router-dom";

interface indexProps {}

const Create: FC<indexProps> = ({}) => {
  return (
      <div className="text-slate-200">
        <p>What would you like to create</p>
        <ul className="list-disc">
          <div>
            <Link to="question">A New Question</Link>
          </div>
          <div>
            <Link to="test">A New Test</Link>
          </div>
        </ul>
      </div>
  );
};

export default Create;

export const CreateLoader: LoaderFunction = async (_args: LoaderFunctionArgs) => {
  console.log("inside create loader");
  const response = await axios.get("http://localhost:8080/api/me", {
    withCredentials: true,
  });
  console.log(response.data);
  if (!(response.data.userStatus === "admin")) {
    return redirect("/");
  }
  return null;
};
