import axios from "axios";
import { FC } from "react";
import { LoaderFunction, LoaderFunctionArgs, useLoaderData, useRouteLoaderData } from "react-router-dom";

interface TestResultProps {}

const TestResult: FC<TestResultProps> = ({}) => {
  const loaderData = useLoaderData() as any;
  const score = loaderData.score;
  return <div>Your score is {score}</div>;
};

export default TestResult;

export const TestResultLoader: LoaderFunction = async (args: LoaderFunctionArgs) => {
  const testId = args.params.testId;

  const response = await axios.get(`http://localhost:8080/api/tests/${testId}/result`, {
    withCredentials: true,
  });

  return {
    score: response.data.score
  }
};
